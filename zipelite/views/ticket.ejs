<%- include('layout') %>

<div class="ticket-container" style="max-width:600px;margin:40px auto;padding:25px;border-radius:20px;background:#fff;box-shadow:0 0 15px rgba(0,0,0,0.15);font-family:'Segoe UI',sans-serif;">
  <div style="text-align:center;">
    <img src="<%= plataforma.logoUrl %>" alt="<%= plataforma.name %>" style="max-height:70px;margin-bottom:10px;">
    <h2 style="margin:10px 0;color:#e50914;">🎟️ Ticket de Compra</h2>
    <p style="color:#666;">Gracias por confiar en <strong>Eliteflix</strong></p>
  </div>

  <hr style="margin:20px 0;">

  <p><strong>Plataforma:</strong> <%= plataforma.name %></p>
  <p><strong>Duración:</strong> <%= suscripcion.meses %> mes<%= suscripcion.meses > 1 ? 'es' : '' %></p>

  <div style="margin-top:15px;">
    <p><strong>Correo asignado:</strong> 
      <span id="correo" style="background:#f4f4f4;padding:4px 8px;border-radius:6px;"><%= suscripcion.datosCuenta.correo %></span>
      <button onclick="copiar('correo')" style="margin-left:5px;padding:4px 8px;border:none;border-radius:6px;background:#e50914;color:white;cursor:pointer;">Copiar</button>
    </p>

    <p><strong>Contraseña:</strong> 
      <span id="password" style="background:#f4f4f4;padding:4px 8px;border-radius:6px;"><%= suscripcion.datosCuenta.password %></span>
      <button onclick="copiar('password')" style="margin-left:5px;padding:4px 8px;border:none;border-radius:6px;background:#e50914;color:white;cursor:pointer;">Copiar</button>
    </p>
  </div>

  <div style="margin-top:20px;background:#f8f8f8;padding:10px 15px;border-left:4px solid #e50914;border-radius:8px;">
    <p style="margin:0;"><strong>💬 Mensaje del administrador:</strong></p>
    <p style="margin:5px 0 0 0;color:#444;"><%= mensaje %></p>
  </div>

  <div style="margin-top:20px;">
    <p><strong>Fecha de inicio:</strong> <%= dayjs(suscripcion.fechaInicio).format('DD/MM/YYYY') %></p>
    <p><strong>Fecha de fin:</strong> <%= dayjs(suscripcion.fechaFin).format('DD/MM/YYYY') %></p>
  </div>

  <div style="text-align:center;margin-top:25px;">
    <button onclick="window.print()" style="padding:10px 20px;border:none;border-radius:10px;background:#e50914;color:#fff;cursor:pointer;font-weight:600;">
      📄 Descargar Ticket (PDF)
    </button>
  </div>

  <div style="margin-top:30px;text-align:center;color:#888;font-size:13px;">
    <p>Eliteflix © <%= new Date().getFullYear() %> — Todos los derechos reservados</p>
  </div>
</div>

<script>
function copiar(id) {
  const texto = document.getElementById(id).innerText;
  navigator.clipboard.writeText(texto).then(() => {
    alert('Copiado: ' + texto);
  });
}
</script>
